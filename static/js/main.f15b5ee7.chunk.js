(this.webpackJsonpcoalition=this.webpackJsonpcoalition||[]).push([[0],{41:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(6),c=n.n(r),a=n(35),i=n.n(a),u=n(23),s=(n(41),n(13)),o=n(0),j=n.n(o),b=n(1),p=n(9),f=n(12),d=n(17),l=function(e){var t=function(t){var n=Object(f.g)();return Object(f.d)(n,e,t)},n=function(){var e=Object(b.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(n),e.next=3,Object(f.e)(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(b.a)(j.a.mark((function e(r,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.i)(t(r),c);case 2:return e.next=4,n(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(t(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getCurrentUser:function(){return Object(d.b)().currentUser},getDocRef:t,getCollection:function(){var t=Object(f.g)();return Object(f.b)(t,e)},getById:n,set:r,deleteDocument:c}},O=function(){var e=window.location.origin;return"https://eyarham.github.io"===e?e+"/coalition":e},v=l("memberships"),x=v.getCurrentUser,h=v.getDocRef,m=v.getCollection,w=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={coalitionId:t,memberId:n},e.next=3,Object(f.a)(m(),r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(f.h)(m(),Object(f.j)("memberId","==",x().uid)),e.next=3,Object(f.f)(t);case 3:return n=e.sent,r=[],n.forEach((function(e){r.push(e.data().coalitionId)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.h)(m(),Object(f.j)("memberId","==",x().uid),Object(f.j)("coalitionId","==",t)),e.next=3,Object(f.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.h)(m(),Object(f.j)("coalitionId","==",t)),e.next=3,Object(f.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:return n=e.sent,e.abrupt("return",n.length);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return n=e.sent,e.next=5,I(n.data().coalitionId);case 5:if(!(e.sent>1)){e.next=11;break}return e.next=9,Object(f.c)(h(n.id));case 9:e.next=12;break;case 11:throw new Error("Can not delete last member.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=l("invites"),D=S.getCurrentUser,N=S.getDocRef,T=S.getCollection,E=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={coalitionId:t,memberId:n},e.next=3,Object(f.a)(T(),r);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.h)(T(),Object(f.j)("memberId","==",D().uid),Object(f.j)("coalitionId","==",t)),e.next=3,Object(f.f)(n);case 3:if(!(r=e.sent).empty){e.next=11;break}return e.next=7,E(t,D().uid);case 7:return c=e.sent,e.abrupt("return",c);case 11:return e.abrupt("return",r.docs[0]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(t),e.next=3,Object(f.e)(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return n=e.sent,r=n.data(),c=r.coalitionId,e.next=6,k(c);case 6:if(!e.sent){e.next=10;break}e.next=12;break;case 10:return e.next=12,w(c,D().uid);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O(),r="/#/invite",e.next=4,_(t);case 4:return c=e.sent,a=c.id,i=n+r+("?id="+a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=n(4),L=function(e){var t=e.coalitionId,n=Object(r.useState)("http://localhost:3000/"),c=Object(p.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,B(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t&&e()}),[t]),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:"Invite Link:"}),Object(U.jsx)("input",{type:"button",value:"Copy Invite Link",onClick:function(){navigator.clipboard.writeText(a)}}),Object(U.jsx)("div",{children:Object(U.jsx)("textarea",{disabled:!0,value:a,className:"inviteLinkBox"})})]})},V=n(24),R=n(16),F=l("coalitions"),Y=F.getCurrentUser,M=F.getDocRef,K=F.getCollection,H=F.deleteDocument,J=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={name:t,createdBy:Y().uid},e.next=4,Object(f.a)(K(),n);case 4:return r=e.sent,console.log("Document written with ID: ",r.id),e.next=8,w(r.id,Y().uid);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.i)(M(t),n);case 2:return e.next=4,W(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return t=e.sent,e.abrupt("return",q(t,function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n=Object(f.h)(K(),Object(f.j)("__name__","in",t)),e.next=5,Object(f.f)(n);case 5:return r=e.sent,e.abrupt("return",r.docs);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(e,t){var n=0,r=e.length;return function(){if(-1===n)return[];var c=n+t,a=e.slice(n,c);return n=c<r?c:-1,a}},q=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,c,a,i,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=Q(t,10),a=0;case 3:if(!(a<10)){e.next=12;break}return i=c(),e.next=7,n(i);case 7:u=e.sent,r.push.apply(r,Object(R.a)(u));case 9:a++,e.next=3;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M(t),e.next=3,Object(f.e)(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:if(!e.sent){e.next=9;break}return e.next=6,W(t);case 6:return e.abrupt("return",e.sent);case 9:throw new Error("Coalition does not exist or user is not a member.");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return n=e.sent,r=(c=n)<4?c:c/2,e.abrupt("return",r);case 5:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return n=e.sent,e.next=5,W(n.data().coalitionId);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=l("votes"),te=ee.getCurrentUser,ne=ee.getCollection,re=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t);case 2:if(!e.sent){e.next=6;break}e.next=9;break;case 6:return r={petitionId:t,userId:te().uid,selection:n},e.next=9,Object(f.a)(ne(),r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.h)(ne(),Object(f.j)("petitionId","==",t),Object(f.j)("userId","==",te().uid)),e.next=3,Object(f.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.h)(ne(),Object(f.j)("petitionId","==",t)),e.next=3,Object(f.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=l("petitions"),ue=ie.getCurrentUser,se=ie.getById,oe=ie.getCollection,je=ie.set,be=function(){var e=Object(b.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:return c=e.sent,a=Object(V.a)({coalitionId:t,petitionType:n,userId:ue().uid,votesNeeded:c,status:"new"},r),e.next=6,Object(f.a)(oe(),a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),pe=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.h)(oe(),Object(f.j)("coalitionId","==",t)),e.next=3,Object(f.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,i,u,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:if(n=e.sent,r=n.data(),c=r.petitionType,a=r.coalitionId,i=r.charterText,"1"!==c){e.next=11;break}return e.next=7,X(a);case 7:return u=e.sent,s=Object(V.a)(Object(V.a)({},u.data()),{},{charter:i}),e.next=11,z(u.id,s);case 11:return e.next=13,je(t,Object(V.a)(Object(V.a)({},n.data()),{},{status:"complete"}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:return n=e.sent,r=n.data().votesNeeded,e.next=6,ae(t);case 6:if(c=e.sent,!(c.filter((function(e){return"yes"===e.data().selection})).length>=r)){e.next=11;break}return e.next=11,fe(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,c,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:return n=e.sent,r=n.data().votesNeeded,e.next=6,ae(t);case 6:return c=e.sent,a=c.filter((function(e){return"yes"===e.data().selection})).length,i=c.filter((function(e){return"no"===e.data().selection})).length,e.abrupt("return",{votesNeeded:r,yesVotes:a,noVotes:i});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e){var t=e.coalitionId,n=Object(r.useState)(""),c=Object(p.a)(n,2),a=c[0],i=c[1],u=Object(r.useState)(""),s=Object(p.a)(u,2),o=s[0],f=s[1],d=Object(r.useState)(""),l=Object(p.a)(d,2),O=l[0],v=l[1],x=Object(r.useState)("0"),h=Object(p.a)(x,2),m=h[0],w=h[1],y=Object(r.useState)(),k=Object(p.a)(y,2),g=k[0],I=k[1],C=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),"0"!==m){e.next=6;break}return e.next=4,be(t,m,{title:a,body:o});case 4:e.next=9;break;case 6:if("1"!==m){e.next=9;break}return e.next=9,be(t,m,{charterText:g});case 9:v("Created Successfully");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("form",{onSubmit:C,children:[Object(U.jsxs)("select",{onChange:function(e){w(e.target.value)},children:[Object(U.jsx)("option",{value:0,children:"Text Petition"}),Object(U.jsx)("option",{value:1,children:"Update Charter"})]}),"0"===m&&Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:"text petition"}),Object(U.jsx)("div",{children:Object(U.jsx)("input",{onChange:function(e){i(e.target.value)},placeholder:"title"})}),Object(U.jsx)("div",{children:Object(U.jsx)("input",{onChange:function(e){f(e.target.value)},placeholder:"body"})})]}),"1"===m&&Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:"update charter"}),Object(U.jsx)("div",{children:Object(U.jsx)("input",{onChange:function(e){I(e.target.value)},placeholder:"charter text"})})]}),Object(U.jsx)("div",{children:Object(U.jsx)("input",{type:"submit",value:"submit petition"})}),Object(U.jsx)("div",{children:O})]})},ve=(n(45),function(e){var t=e.petitionId,n=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,re(t,"yes");case 3:return e.next=5,de(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,re(t,"no");case 3:return e.next=5,de(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{children:[Object(U.jsx)("input",{type:"button",value:"yes",onClick:n}),Object(U.jsx)("input",{type:"button",value:"no",onClick:r})]})}),xe=function(e){var t=e.petition,n=e.showVote,c=Object(r.useState)(),a=Object(p.a)(c,2),i=a[0],u=a[1],s=Object(r.useState)(),o=Object(p.a)(s,2),f=o[0],d=o[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t.id);case 2:n=e.sent,u(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.id]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(t.id);case 2:n=e.sent,d(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.id]);var l=t.data();return Object(U.jsxs)("div",{className:"petition-block",children:["Status: ",l.status,"0"===l.petitionType&&Object(U.jsxs)("div",{children:["Title: ",l.title]}),"0"===l.petitionType&&Object(U.jsxs)("div",{children:["Body: ",l.body]}),"1"===l.petitionType&&Object(U.jsxs)("div",{children:["Text: ",l.charterText]}),n&&Object(U.jsx)(ve,{petitionId:t.id}),i&&Object(U.jsxs)("div",{children:["Your vote: ",i.data().selection]}),f&&Object(U.jsxs)("div",{children:["Outcome: Yes: ",f.yesVotes," No: ",f.noVotes," Needed: ",f.votesNeeded," Has Passed: ",f.yesVotes>=f.votesNeeded?"yes":"no"]})]})},he=function(e){var t=e.petitions,n=e.showVote;return Object(U.jsx)("div",{children:t&&t.map((function(e,t){return Object(U.jsx)(xe,{petition:e,showVote:n},t)}))})},me=function(e){var t=e.coalitionId,n=Object(r.useState)(),c=Object(p.a)(n,2),a=c[0],i=c[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var u=function(){return a.filter((function(e){return"new"===e.data().status}))},s=function(){return a.filter((function(e){return"complete"===e.data().status}))};return Object(U.jsxs)("div",{children:[a&&u()&&u().length>0&&Object(U.jsx)("h2",{children:"Open Petitions"}),a&&Object(U.jsx)(he,{petitions:u(),showVote:!0}),a&&s()&&s().length>0&&Object(U.jsx)("h2",{children:"Passed Petitions"}),a&&Object(U.jsx)(he,{petitions:s(),showVote:!1})]})},we=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(e){var t=e.coalitionId,n=Object(r.useState)(),c=Object(p.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),a?Object(U.jsx)("div",{children:a&&a.map((function(e,t){return Object(U.jsx)("div",{children:"rule: "},t)}))}):Object(U.jsx)("div",{children:"No rules yet..."})},ke=l("users"),ge=ke.getCurrentUser,Ie=ke.getCollection,Ce=ke.set,Se=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userId:t,displayName:"",createdBy:ge().uid},e.next=3,Object(f.a)(Ie(),n);case 3:return r=e.sent,e.next=6,Object(f.e)(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ge(),e.next=3,Ne(t.uid);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.h)(Ie(),Object(f.j)("userId","==",t)),e.next=3,Object(f.f)(n);case 3:if(!(r=e.sent).empty){e.next=8;break}return e.next=7,Object(f.e)(Se(t));case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",r.docs[0]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:return n=e.sent,e.next=5,Promise.all(n.map(function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t.data().memberId);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(e){var t=e.coalitionId,n=Object(r.useState)(),c=Object(p.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{children:["Member number: ",a&&a.length]}),a&&a.map((function(e,t){if(e){var n=e.data().displayName;return Object(U.jsx)("div",{children:n||"no display name"},t)}return Object(U.jsx)("div",{children:"No info"},t)}))]})},_e=(n(46),function(e){var t=e.headerText,n=e.children,c=Object(r.useState)(),a=Object(p.a)(c,2),i=a[0],u=a[1];return Object(U.jsxs)("div",{className:"expand-box",children:[Object(U.jsx)("div",{className:"expand-box-header",onClick:function(e){u(!i)},children:t}),i&&Object(U.jsx)("div",{className:"expand-box-children",children:n})]})}),Ae=function(e){var t=e.openCoalition.data().charter;return Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:"Charter:"}),Object(U.jsx)("textarea",{disabled:!0,value:t})]})},Pe=function(e){var t=e.openCoalition,n=Object(r.useState)(!1),c=Object(p.a)(n,2),a=c[0],i=c[1];return Object(U.jsxs)("div",{children:["Creator things",Object(U.jsx)("div",{children:Object(U.jsx)("input",{type:"button",value:"Delete Coalition",onClick:function(e){e.preventDefault(),a?(H(t.id),i(!1)):i(!0)}})}),Object(U.jsx)("div",{children:a&&Object(U.jsx)("div",{children:"Delete?"})})]})},Be=function(e){var t=e.openCoalition,n=Object(r.useState)(!1),c=Object(p.a)(n,2),a=c[0],i=c[1],u=Object(r.useState)(!1),o=Object(p.a)(u,2),f=o[0],d=o[1],l=Object(s.g)(),O=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a){e.next=5;break}i(!0),e.next=14;break;case 5:return e.prev=5,e.next=8,C(t.id);case 8:l("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),d(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{children:[Object(U.jsx)("input",{type:"button",onClick:O,value:"Leave "+t.data().name}),a&&Object(U.jsx)("div",{children:"click again to confirm"}),Object(U.jsx)("div",{children:f})]})},Ue=function(e){var t=e.selectedCoalition,n=Object(r.useState)(!1),c=Object(p.a)(n,2),a=c[0],i=c[1],u=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),!a)return Object(U.jsx)("div",{children:"Loading"});var s,o=a&&a.data().createdBy===l().getCurrentUser().uid;return Object(U.jsxs)("div",{children:[Object(U.jsxs)("h2",{children:[" ",a.data().name]}),Object(U.jsx)("a",{href:(s=a.id,O()+"/#/coalition/"+s),children:"Coalition Link"}),Object(U.jsx)(_e,{headerText:"Members",children:Object(U.jsx)(Ee,{coalitionId:a.id})}),Object(U.jsx)(_e,{headerText:"Charter",children:Object(U.jsx)(Ae,{openCoalition:a})}),Object(U.jsx)(_e,{headerText:"Rules",children:Object(U.jsx)(ye,{coalitionId:a.id})}),Object(U.jsx)(_e,{headerText:"Invite",children:Object(U.jsx)(L,{coalitionId:a.id})}),Object(U.jsx)(_e,{headerText:"New Petition",children:Object(U.jsx)(Oe,{coalitionId:a.id})}),Object(U.jsx)(_e,{headerText:"Petitions",children:Object(U.jsx)(me,{coalitionId:a.id})}),Object(U.jsx)(Be,{openCoalition:a}),Object(U.jsx)("div",{children:o&&Object(U.jsx)(Pe,{openCoalition:a})})]})},Le=function(){var e=Object(s.h)(),t=Object(r.useState)(),n=Object(p.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(),u=Object(p.a)(i,2),o=u[0],f=u[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X(e.coalitionId);case 3:n=t.sent,a(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),f(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[e.coalitionId]),o?Object(U.jsx)("div",{children:o}):c?Object(U.jsx)(Ue,{selectedCoalition:c}):Object(U.jsx)("div",{children:"Loading..."})},Ve=function(e){var t=e.isDirty,n=e.setIsDirty,c=e.setSelectedCoalition,a=Object(r.useState)(),i=Object(p.a)(a,2),u=i[0],s=i[1],o=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){t&&o(),t&&n(!1),console.log("This is mounted or updated.")}),[t,n]),Object(U.jsxs)("div",{children:["My coalitions",u&&u.map((function(e,t){return Object(U.jsxs)("div",{children:[e.data().name,Object(U.jsx)("input",{type:"button",value:"open",onClick:function(t){c(e)}})]},t)}))]})},Re=function(e){var t=e.setIsDirty,n=Object(r.useState)(),c=Object(p.a)(n,2),a=c[0],i=c[1],u=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,J(a);case 3:t(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{children:["Add New Coalition",Object(U.jsxs)("form",{onSubmit:u,children:[Object(U.jsx)("input",{onChange:function(e){i(e.target.value)},value:a}),Object(U.jsx)("input",{type:"submit"})]})]})},Fe=function(){var e=Object(r.useState)(!0),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),i=Object(p.a)(a,2),u=i[0],s=i[1];return Object(U.jsxs)("div",{className:"widget-panel",children:[Object(U.jsx)(Ve,{isDirty:n,setIsDirty:c,setSelectedCoalition:s}),Object(U.jsx)(Re,{setIsDirty:c}),u&&Object(U.jsx)(Ue,{selectedCoalition:u})]})},Ye=function(){var e=Object(u.c)(),t=Object(p.a)(e,1)[0],n=Object(s.g)(),c=Object(r.useState)(),a=Object(p.a)(c,2),i=a[0],o=a[1],f=Object(r.useState)(),d=Object(p.a)(f,2),l=d[0],O=d[1],v=Object(r.useState)(),x=Object(p.a)(v,2),h=x[0],m=x[1],w=Object(r.useState)(!1),k=Object(p.a)(w,2),g=k[0],I=k[1];console.log(t),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get("id"),m(n),e.next=4,$(n);case 4:return r=e.sent,e.next=7,y();case 7:e.sent.indexOf(r.id)>-1&&I(!0),o(r),O(r.data());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var C=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,P(h);case 3:n("/coalition/"+i.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l?g?Object(U.jsxs)("div",{children:["You are a member of ",l.name," "]}):Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{children:["You've been invited to join ",l.name]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("h2",{children:"Charter:"}),Object(U.jsx)("p",{children:l.charter})]}),Object(U.jsx)("input",{type:"button",onClick:C,value:"Accept"})]}):Object(U.jsx)("div",{children:"Loading..."})},Me=function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(p.a)(a,2),u=i[0],s=i[1],o=Object(r.useState)(""),f=Object(p.a)(o,2),d=f[0],l=f[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:t=e.sent,c(t),n=t.data().displayName,s(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var O=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Ce(n.id,Object(V.a)(Object(V.a)({},n.data()),{},{displayName:u}));case 3:l("update successful");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!n)return Object(U.jsx)("div",{children:"Loading..."});var v=n.data().displayName;return Object(U.jsxs)("div",{children:[n.id,Object(U.jsxs)("form",{onSubmit:O,children:[Object(U.jsxs)("div",{children:["Display name: ",v," "]}),Object(U.jsx)("input",{type:"text",value:u,onChange:function(e){s(e.target.value),l("")}}),Object(U.jsx)("input",{type:"submit",value:"Save"})]}),Object(U.jsx)("div",{children:d})]})};var Ke=function(){var e=Object(d.b)(),t=Object(r.useState)(),n=Object(p.a)(t,2),c=n[0],a=n[1];return Object(d.c)(e,(function(e){a(e||null)})),Object(U.jsxs)("div",{children:[c&&Object(U.jsx)("div",{children:c.email}),Object(U.jsx)(u.b,{to:"/Account",children:"Account"}),Object(U.jsx)("input",{type:"button",onClick:function(){Object(d.e)(e).then((function(){})).catch((function(e){}))},value:"Sign Out"})]})};var He=function(){var e=Object(d.b)(),t=Object(r.useState)(""),n=Object(p.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(""),u=Object(p.a)(i,2),s=u[0],o=u[1],f=Object(r.useState)(),l=Object(p.a)(f,2),O=l[0],v=l[1],x=Object(r.useState)(),h=Object(p.a)(x,2),m=h[0],w=h[1];return Object(d.c)(e,(function(e){v(e||null)})),Object(U.jsxs)("div",{children:[O&&Object(U.jsx)("div",{children:O.email}),!O&&"no user",Object(U.jsxs)("form",{children:[Object(U.jsx)("input",{placeholder:"email",onChange:function(e){a(e.target.value)}}),Object(U.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){o(e.target.value)}}),Object(U.jsx)("input",{type:"button",onClick:function(){Object(d.d)(e,c,s).then((function(e){})).catch((function(e){var t=e.message;w(t)}))},value:"Sign In"}),Object(U.jsx)("input",{type:"button",onClick:function(){Object(d.a)(e,c,s).then(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(t.user.uid);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.message;w(t)}))},value:"Create New User"})]}),Object(U.jsx)("div",{children:m})]})};var Je=function(){var e=Object(d.b)(),t=Object(r.useState)(),n=Object(p.a)(t,2),c=n[0],a=n[1];return Object(d.c)(e,(function(e){a(e||null)})),Object(U.jsxs)("div",{children:[c&&Object(U.jsx)(Ke,{}),!c&&Object(U.jsx)(He,{})]})},ze=function(e){var t=Object(d.b)(),n=Object(r.useState)(),c=Object(p.a)(n,2),a=c[0],i=c[1];return Object(d.c)(t,(function(e){i(e||null)})),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:Object(U.jsx)(Je,{})}),Object(U.jsx)("hr",{}),Object(U.jsx)("div",{children:a&&e.children})]})},Ge=n(36),Qe={apiKey:window._env_&&window._env_.FIREBASE_API_KEY||"AIzaSyAfQe2YjUh4yxN6Ax0ooIIgvb9RHGDTTKw",authDomain:"coalition-ba367.firebaseapp.com",projectId:"coalition-ba367",storageBucket:"coalition-ba367.appspot.com",messagingSenderId:"1016116125256",appId:window._env_&&window._env_.FIREBASE_APP_ID||"1:1016116125256:web:21badede89212eb844027d"},qe=Object(Ge.a)(Qe),We=function(e){var t=e.children;return Object(U.jsx)("div",{children:qe&&t})},Xe=function(){return Object(U.jsxs)("div",{className:"App",children:[Object(U.jsxs)("header",{className:"App-header",children:[Object(U.jsx)("a",{href:O(),children:Object(U.jsx)("h1",{children:"Coalition"})}),Object(U.jsx)("span",{style:{float:"right"},children:Object(U.jsx)("a",{href:"https://github.com/eyarham/coalition",children:"code"})})]}),Object(U.jsx)("body",{children:Object(U.jsx)(We,{children:Object(U.jsx)(ze,{children:Object(U.jsx)(s.a,{})})})})]})},Ze=function(){return Object(U.jsx)(s.d,{children:Object(U.jsxs)(s.b,{path:"/",element:Object(U.jsx)(Xe,{}),children:[Object(U.jsx)(s.b,{path:"/",element:Object(U.jsx)(Fe,{})}),Object(U.jsx)(s.b,{path:"/invite",element:Object(U.jsx)(Ye,{})}),Object(U.jsx)(s.b,{path:"/account",element:Object(U.jsx)(Me,{})}),Object(U.jsx)(s.b,{path:"/coalition/:coalitionId",element:Object(U.jsx)(Le,{})})]})})};var $e=function(){return Object(U.jsx)(Ze,{})},et=(n(47),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))});i.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(u.a,{children:Object(U.jsx)($e,{})})}),document.getElementById("root")),et()}},[[48,1,2]]]);
//# sourceMappingURL=main.f15b5ee7.chunk.js.map